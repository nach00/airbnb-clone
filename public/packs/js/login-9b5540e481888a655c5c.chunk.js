(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{284:function(e,t,n){},403:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(10),l=n.n(o),c=n(8),s=n(5);function i(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function u(e,t){return u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},u(e,t)}function m(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=f(e);if(t){var r=f(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return d(this,n)}}function d(e,t){if(t&&("object"===typeof t||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}var p=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&u(e,t)}(l,e);var t,n,a,o=m(l);function l(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(t=o.call(this,e)).handleInputChange=function(e){var n=e.target,a=n.name,r=n.value;t.setState(function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({},a,r))},t.handleSubmit=function(e){e.preventDefault(),t.setState({loading:!0,error:null});var n=t.state,a=n.email,r=n.password;a&&r?fetch("/api/sessions",Object(s.b)({method:"POST",body:JSON.stringify({user:{email:a,password:r}})})).then(s.a).then((function(e){return e.json()})).then((function(e){t.setState({loading:!1}),e.user?t.props.onLoginSuccess(e.user):t.setState({error:"Login failed. Please try again."})})).catch((function(e){console.error("Login error:",e),t.setState({loading:!1,error:"Invalid email or password. Please try again."})})):t.setState({loading:!1,error:"Please fill in all fields"})},t.state={email:"",password:"",loading:!1,error:null},t}return t=l,(n=[{key:"render",value:function(){var e=this.state,t=e.email,n=e.password,a=e.loading,o=e.error;return r.a.createElement("form",{onSubmit:this.handleSubmit},o&&r.a.createElement("div",{className:"alert alert-danger",role:"alert"},o),r.a.createElement("div",{className:"mb-3"},r.a.createElement("label",{htmlFor:"email",className:"form-label"},"Email address"),r.a.createElement("input",{type:"email",className:"form-control",id:"email",name:"email",value:t,onChange:this.handleInputChange,required:!0,disabled:a})),r.a.createElement("div",{className:"mb-3"},r.a.createElement("label",{htmlFor:"password",className:"form-label"},"Password"),r.a.createElement("input",{type:"password",className:"form-control",id:"password",name:"password",value:n,onChange:this.handleInputChange,required:!0,disabled:a})),r.a.createElement("div",{className:"d-grid mb-3"},r.a.createElement("button",{type:"submit",className:"btn btn-primary",disabled:a},a?r.a.createElement(r.a.Fragment,null,r.a.createElement("span",{className:"spinner-border spinner-border-sm me-2",role:"status"},r.a.createElement("span",{className:"visually-hidden"},"Loading...")),"Signing in..."):"Sign in")),r.a.createElement("div",{className:"text-center"},r.a.createElement("p",{className:"mb-0"},"Don't have an account?"," ",r.a.createElement("button",{type:"button",className:"btn btn-link p-0",onClick:this.props.onToggleForm,disabled:a},"Sign up here"))),r.a.createElement("div",{className:"mt-4 p-3 bg-light rounded"},r.a.createElement("small",{className:"text-muted"},r.a.createElement("strong",null,"Demo Credentials:"),r.a.createElement("br",null),"Email: john@example.com",r.a.createElement("br",null),"Password: password123")))}}])&&i(t.prototype,n),a&&i(t,a),Object.defineProperty(t,"prototype",{writable:!1}),l}(r.a.Component);function b(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function h(e,t){return h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},h(e,t)}function g(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=v(e);if(t){var r=v(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return y(this,n)}}function y(e,t){if(t&&("object"===typeof t||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function v(e){return v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},v(e)}var E=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&h(e,t)}(l,e);var t,n,a,o=g(l);function l(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(t=o.call(this,e)).handleInputChange=function(e){var n=e.target,a=n.name,r=n.value;t.setState(function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({},a,r))},t.validateForm=function(){var e=t.state,n=e.username,a=e.email,r=e.password,o=e.confirmPassword;if(!n||!a||!r||!o)return"Please fill in all fields";if(n.length<3)return"Username must be at least 3 characters long";if(r.length<8)return"Password must be at least 8 characters long";if(r!==o)return"Passwords do not match";return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(a)?null:"Please enter a valid email address"},t.handleSubmit=function(e){e.preventDefault(),t.setState({loading:!0,error:null});var n=t.validateForm();if(n)t.setState({loading:!1,error:n});else{var a=t.state,r=a.username,o=a.email,l=a.password;fetch("/api/users",Object(s.b)({method:"POST",body:JSON.stringify({user:{username:r,email:o,password:l}})})).then(s.a).then((function(e){return e.json()})).then((function(e){if(e.user)return t.loginUser(o,l);throw new Error("Signup failed")})).catch((function(e){console.error("Signup error:",e),t.setState({loading:!1,error:"Signup failed. Email or username may already be taken."})}))}},t.loginUser=function(e,n){return fetch("/api/sessions",Object(s.b)({method:"POST",body:JSON.stringify({user:{email:e,password:n}})})).then(s.a).then((function(e){return e.json()})).then((function(e){t.setState({loading:!1}),e.user?t.props.onSignupSuccess(e.user):t.setState({error:"Account created but login failed. Please try logging in manually."})})).catch((function(e){console.error("Auto-login error:",e),t.setState({loading:!1,error:"Account created successfully! Please log in manually."})}))},t.state={username:"",email:"",password:"",confirmPassword:"",loading:!1,error:null},t}return t=l,(n=[{key:"render",value:function(){var e=this.state,t=e.username,n=e.email,a=e.password,o=e.confirmPassword,l=e.loading,c=e.error;return r.a.createElement("form",{onSubmit:this.handleSubmit},c&&r.a.createElement("div",{className:"alert alert-danger",role:"alert"},c),r.a.createElement("div",{className:"mb-3"},r.a.createElement("label",{htmlFor:"username",className:"form-label"},"Username"),r.a.createElement("input",{type:"text",className:"form-control",id:"username",name:"username",value:t,onChange:this.handleInputChange,required:!0,disabled:l,minLength:"3",maxLength:"64"}),r.a.createElement("div",{className:"form-text"},"Choose a unique username (3-64 characters)")),r.a.createElement("div",{className:"mb-3"},r.a.createElement("label",{htmlFor:"signup-email",className:"form-label"},"Email address"),r.a.createElement("input",{type:"email",className:"form-control",id:"signup-email",name:"email",value:n,onChange:this.handleInputChange,required:!0,disabled:l})),r.a.createElement("div",{className:"mb-3"},r.a.createElement("label",{htmlFor:"signup-password",className:"form-label"},"Password"),r.a.createElement("input",{type:"password",className:"form-control",id:"signup-password",name:"password",value:a,onChange:this.handleInputChange,required:!0,disabled:l,minLength:"8"}),r.a.createElement("div",{className:"form-text"},"Password must be at least 8 characters long")),r.a.createElement("div",{className:"mb-3"},r.a.createElement("label",{htmlFor:"confirmPassword",className:"form-label"},"Confirm Password"),r.a.createElement("input",{type:"password",className:"form-control",id:"confirmPassword",name:"confirmPassword",value:o,onChange:this.handleInputChange,required:!0,disabled:l})),r.a.createElement("div",{className:"d-grid mb-3"},r.a.createElement("button",{type:"submit",className:"btn btn-primary",disabled:l},l?r.a.createElement(r.a.Fragment,null,r.a.createElement("span",{className:"spinner-border spinner-border-sm me-2",role:"status"},r.a.createElement("span",{className:"visually-hidden"},"Loading...")),"Creating account..."):"Create account")),r.a.createElement("div",{className:"text-center"},r.a.createElement("p",{className:"mb-0"},"Already have an account?"," ",r.a.createElement("button",{type:"button",className:"btn btn-link p-0",onClick:this.props.onToggleForm,disabled:l},"Sign in here"))))}}])&&b(t.prototype,n),a&&b(t,a),Object.defineProperty(t,"prototype",{writable:!1}),l}(r.a.Component);function w(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function N(e,t){return N=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},N(e,t)}function S(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=P(e);if(t){var r=P(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return O(this,n)}}function O(e,t){if(t&&("object"===typeof t||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function P(e){return P=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},P(e)}var j=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&N(e,t)}(l,e);var t,n,a,o=S(l);function l(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(t=o.call(this,e)).checkAuthentication=function(){fetch("/api/authenticated",Object(s.b)({method:"GET"})).then(s.a).then((function(e){return e.json()})).then((function(e){t.setState({isAuthenticated:e.authenticated,user:e.user||null,loading:!1}),e.authenticated&&t.handleRedirect()})).catch((function(e){console.error("Error checking authentication:",e),t.setState({loading:!1})}))},t.handleRedirect=function(){var e=new URLSearchParams(window.location.search).get("redirect_url")||"/";window.location.href=e},t.handleLoginSuccess=function(e){t.setState({isAuthenticated:!0,user:e}),t.handleRedirect()},t.handleSignupSuccess=function(e){t.setState({isAuthenticated:!0,user:e}),t.handleRedirect()},t.toggleForm=function(){t.setState((function(e){return{showLogin:!e.showLogin}}))},t.handleLogout=function(){fetch("/api/sessions",Object(s.b)({method:"DELETE"})).then(s.a).then((function(){t.setState({isAuthenticated:!1,user:null}),window.location.href="/"})).catch((function(e){console.error("Error logging out:",e)}))},t.state={showLogin:!0,isAuthenticated:!1,loading:!0,user:null},t}return t=l,(n=[{key:"componentDidMount",value:function(){this.checkAuthentication()}},{key:"render",value:function(){var e=this.state,t=e.showLogin,n=e.isAuthenticated,a=e.loading,o=e.user;return a?r.a.createElement(c.a,null,r.a.createElement("div",{className:"text-center py-5"},r.a.createElement("div",{className:"spinner-border text-primary",role:"status"},r.a.createElement("span",{className:"visually-hidden"},"Loading...")),r.a.createElement("p",{className:"mt-2 text-muted"},"Loading..."))):n&&o?r.a.createElement(c.a,null,r.a.createElement("div",{className:"row justify-content-center"},r.a.createElement("div",{className:"col-md-6"},r.a.createElement("div",{className:"text-center py-5"},r.a.createElement("h2",{className:"mb-3"},"Welcome back, ",o.username,"!"),r.a.createElement("p",{className:"text-muted mb-4"},"You are already logged in."),r.a.createElement("div",{className:"d-grid gap-2"},r.a.createElement("a",{href:"/",className:"btn btn-primary"},"Browse Properties"),r.a.createElement("button",{className:"btn btn-outline-secondary",onClick:this.handleLogout},"Logout")))))):r.a.createElement(c.a,null,r.a.createElement("div",{className:"row justify-content-center"},r.a.createElement("div",{className:"col-md-6 col-lg-5"},r.a.createElement("div",{className:"card shadow"},r.a.createElement("div",{className:"card-body p-4"},r.a.createElement("div",{className:"text-center mb-4"},r.a.createElement("h2",{className:"card-title"},t?"Welcome back":"Join Airbnb Clone"),r.a.createElement("p",{className:"text-muted"},t?"Sign in to your account to continue":"Create your account to get started")),t?r.a.createElement(p,{onLoginSuccess:this.handleLoginSuccess,onToggleForm:this.toggleForm}):r.a.createElement(E,{onSignupSuccess:this.handleSignupSuccess,onToggleForm:this.toggleForm}))))))}}])&&w(t.prototype,n),a&&w(t,a),Object.defineProperty(t,"prototype",{writable:!1}),l}(r.a.Component);document.addEventListener("DOMContentLoaded",(function(){l.a.render(r.a.createElement(j,null),document.body.appendChild(document.createElement("div")))}));n(284)},5:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return r}));var a=function(e){if(!e.ok)throw Error(e.statusText);return e},r=function(e){var t=document.querySelector('meta[name="csrf-token"]').getAttribute("content");return Object.assign(e,{headers:Object.assign(e.headers||{},{"X-CSRF-Token":t,"Content-Type":"application/json"}),credentials:"same-origin"})}},8:function(e,t,n){"use strict";var a=n(0),r=n.n(a);t.a=function(e){var t=e.children;return r.a.createElement(r.a.Fragment,null,r.a.createElement("nav",{className:"navbar navbar-expand-lg navbar-light bg-light border-bottom"},r.a.createElement("div",{className:"container"},r.a.createElement("a",{className:"navbar-brand fw-bold text-primary",href:"/"},"Airbnb Clone"),r.a.createElement("button",{className:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarNav"},r.a.createElement("span",{className:"navbar-toggler-icon"})),r.a.createElement("div",{className:"collapse navbar-collapse",id:"navbarNav"},r.a.createElement("ul",{className:"navbar-nav ms-auto"},r.a.createElement("li",{className:"nav-item"},r.a.createElement("a",{className:"nav-link",href:"/"},"Home")),r.a.createElement("li",{className:"nav-item"},r.a.createElement("a",{className:"nav-link",href:"/login"},"Login")))))),r.a.createElement("main",{className:"container mt-4 mb-5"},t),r.a.createElement("footer",{className:"bg-light border-top mt-auto py-4"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-6"},r.a.createElement("h6",{className:"fw-bold"},"Airbnb Clone"),r.a.createElement("p",{className:"text-muted small mb-0"},"Your home away from home")),r.a.createElement("div",{className:"col-md-6 text-md-end"},r.a.createElement("p",{className:"text-muted small mb-0"},"\xa9 2024 Airbnb Clone. Built with Rails & React."))))))}}},[[403,9,0]]]);
//# sourceMappingURL=login-9b5540e481888a655c5c.chunk.js.map