{"version":3,"sources":["webpack:///./app/javascript/src/bookingSuccess.jsx","webpack:///./app/javascript/src/utils/fetchHelper.js","webpack:///./app/javascript/src/layout.jsx"],"names":["BookingSuccess","props","loadBooking","bookingId","fetch","safeCredentials","method","then","handleErrors","response","json","data","success","setState","booking","loading","error","console","formatDate","dateString","Date","toLocaleDateString","weekday","year","month","day","calculateNights","startDate","endDate","start","end","Math","ceil","calculateTotal","start_date","end_date","property","price_per_night","state","this","className","role","href","nights","total","isPaymentComplete","charge","complete","src","image_url","alt","title","style","width","height","objectFit","city","country","guests","property_id","React","Component","document","addEventListener","container","getElementById","getAttribute","ReactDOM","render","ok","Error","statusText","object","token","querySelector","Object","assign","headers","credentials","Layout","children","Fragment","type","id"],"mappings":"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","file":"js/booking_success-716448f1e6ca2a7a45eb.chunk.js","sourcesContent":["import React from 'react';\nimport ReactDOM from 'react-dom';\nimport Layout from './layout';\nimport { handleErrors, safeCredentials } from '@utils/fetchHelper';\n\nclass BookingSuccess extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      booking: null,\n      loading: true,\n      error: null,\n    };\n  }\n\n  componentDidMount() {\n    const bookingId = this.props.bookingId;\n    if (bookingId) {\n      this.loadBooking(bookingId);\n    }\n  }\n\n  loadBooking = (bookingId) => {\n    fetch(`/api/bookings/${bookingId}`, safeCredentials({\n      method: 'GET',\n    }))\n      .then(handleErrors)\n      .then(response => response.json())\n      .then(data => {\n        if (data.success) {\n          this.setState({\n            booking: data.booking,\n            loading: false,\n          });\n        } else {\n          this.setState({\n            error: 'Booking not found',\n            loading: false,\n          });\n        }\n      })\n      .catch(error => {\n        console.error('Error loading booking:', error);\n        this.setState({ \n          loading: false, \n          error: 'Failed to load booking details.' \n        });\n      });\n  };\n\n  formatDate = (dateString) => {\n    const date = new Date(dateString);\n    return date.toLocaleDateString('en-US', {\n      weekday: 'long',\n      year: 'numeric',\n      month: 'long',\n      day: 'numeric'\n    });\n  };\n\n  calculateNights = (startDate, endDate) => {\n    const start = new Date(startDate);\n    const end = new Date(endDate);\n    return Math.ceil((end - start) / (1000 * 60 * 60 * 24));\n  };\n\n  calculateTotal = (booking) => {\n    const nights = this.calculateNights(booking.start_date, booking.end_date);\n    return nights * booking.property.price_per_night;\n  };\n\n  render() {\n    const { booking, loading, error } = this.state;\n\n    if (loading) {\n      return (\n        <Layout>\n          <div className=\"text-center py-5\">\n            <div className=\"spinner-border text-primary\" role=\"status\">\n              <span className=\"visually-hidden\">Loading...</span>\n            </div>\n            <p className=\"mt-2 text-muted\">Loading booking details...</p>\n          </div>\n        </Layout>\n      );\n    }\n\n    if (error || !booking) {\n      return (\n        <Layout>\n          <div className=\"row justify-content-center\">\n            <div className=\"col-md-6\">\n              <div className=\"alert alert-danger\" role=\"alert\">\n                <h4 className=\"alert-heading\">Booking Not Found</h4>\n                <p>{error || 'The booking you\\'re looking for doesn\\'t exist.'}</p>\n                <hr />\n                <a href=\"/\" className=\"btn btn-primary\">\n                  Back to Home\n                </a>\n              </div>\n            </div>\n          </div>\n        </Layout>\n      );\n    }\n\n    const nights = this.calculateNights(booking.start_date, booking.end_date);\n    const total = this.calculateTotal(booking);\n    const isPaymentComplete = booking.charge && booking.charge.complete;\n\n    return (\n      <Layout>\n        <div className=\"row justify-content-center\">\n          <div className=\"col-md-8\">\n            <div className=\"text-center mb-4\">\n              <div className=\"display-1 text-success mb-3\">\n                <i className=\"fas fa-check-circle\"></i>\n              </div>\n              <h1 className=\"h2 mb-3\">\n                {isPaymentComplete ? 'Booking Confirmed!' : 'Booking Created!'}\n              </h1>\n              <p className=\"lead text-muted\">\n                {isPaymentComplete \n                  ? 'Your payment has been processed and your booking is confirmed.'\n                  : 'Your booking has been created. Payment processing may take a few moments.'\n                }\n              </p>\n            </div>\n\n            <div className=\"card\">\n              <div className=\"card-body\">\n                <div className=\"row\">\n                  <div className=\"col-md-4 mb-3\">\n                    <img \n                      src={booking.property.image_url} \n                      className=\"img-fluid rounded\" \n                      alt={booking.property.title}\n                      style={{ width: '100%', height: '200px', objectFit: 'cover' }}\n                    />\n                  </div>\n                  <div className=\"col-md-8\">\n                    <h4 className=\"card-title\">{booking.property.title}</h4>\n                    <p className=\"text-muted mb-3\">\n                      <i className=\"fas fa-map-marker-alt me-2\"></i>\n                      {booking.property.city}, {booking.property.country}\n                    </p>\n\n                    <div className=\"row mb-3\">\n                      <div className=\"col-sm-6\">\n                        <strong>Check-in</strong><br />\n                        <span className=\"text-muted\">{this.formatDate(booking.start_date)}</span>\n                      </div>\n                      <div className=\"col-sm-6\">\n                        <strong>Check-out</strong><br />\n                        <span className=\"text-muted\">{this.formatDate(booking.end_date)}</span>\n                      </div>\n                    </div>\n\n                    <div className=\"row mb-3\">\n                      <div className=\"col-sm-6\">\n                        <strong>Guests</strong><br />\n                        <span className=\"text-muted\">{booking.guests} guest{booking.guests > 1 ? 's' : ''}</span>\n                      </div>\n                      <div className=\"col-sm-6\">\n                        <strong>Duration</strong><br />\n                        <span className=\"text-muted\">{nights} night{nights > 1 ? 's' : ''}</span>\n                      </div>\n                    </div>\n\n                    <hr />\n\n                    <div className=\"d-flex justify-content-between align-items-center\">\n                      <div>\n                        <strong>Total Amount</strong><br />\n                        <span className=\"h4 text-primary\">${total}</span>\n                      </div>\n                      <div className=\"text-end\">\n                        <span className={`badge ${isPaymentComplete ? 'bg-success' : 'bg-warning'} fs-6`}>\n                          {isPaymentComplete ? 'Payment Complete' : 'Payment Processing'}\n                        </span>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </div>\n\n            <div className=\"text-center mt-4\">\n              <a href=\"/\" className=\"btn btn-primary me-3\">\n                Browse More Properties\n              </a>\n              <a href={`/property/${booking.property_id}`} className=\"btn btn-outline-primary\">\n                View Property\n              </a>\n            </div>\n\n            {!isPaymentComplete && (\n              <div className=\"alert alert-info mt-4\" role=\"alert\">\n                <h6 className=\"alert-heading\">Payment Processing</h6>\n                <p className=\"mb-0\">\n                  Your payment is being processed. You'll receive a confirmation email once the payment is complete.\n                  If you have any questions, please contact our support team.\n                </p>\n              </div>\n            )}\n          </div>\n        </div>\n      </Layout>\n    );\n  }\n}\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  const container = document.getElementById('booking-success-container');\n  const bookingId = container.getAttribute('data-booking-id');\n  \n  ReactDOM.render(\n    <BookingSuccess bookingId={bookingId} />,\n    container\n  );\n});","const handleErrors = (response) => {\n  if (!response.ok) {\n    throw Error(response.statusText);\n  }\n  return response;\n};\n\nconst safeCredentials = (object) => {\n  const token = document.querySelector('meta[name=\"csrf-token\"]').getAttribute('content');\n  return Object.assign(object, {\n    headers: Object.assign(object.headers || {}, {\n      'X-CSRF-Token': token,\n      'Content-Type': 'application/json',\n    }),\n    credentials: 'same-origin',\n  });\n};\n\nexport { handleErrors, safeCredentials };","import React from 'react';\nimport PropTypes from 'prop-types';\n\nconst Layout = ({ children }) => {\n  return (\n    <React.Fragment>\n      {/* Navigation Bar */}\n      <nav className=\"navbar navbar-expand-lg navbar-light bg-light border-bottom\">\n        <div className=\"container\">\n          <a className=\"navbar-brand fw-bold text-primary\" href=\"/\">\n            Airbnb Clone\n          </a>\n          <button \n            className=\"navbar-toggler\" \n            type=\"button\" \n            data-bs-toggle=\"collapse\" \n            data-bs-target=\"#navbarNav\"\n          >\n            <span className=\"navbar-toggler-icon\"></span>\n          </button>\n          <div className=\"collapse navbar-collapse\" id=\"navbarNav\">\n            <ul className=\"navbar-nav ms-auto\">\n              <li className=\"nav-item\">\n                <a className=\"nav-link\" href=\"/\">Home</a>\n              </li>\n              <li className=\"nav-item\">\n                <a className=\"nav-link\" href=\"/login\">Login</a>\n              </li>\n            </ul>\n          </div>\n        </div>\n      </nav>\n\n      {/* Main Content */}\n      <main className=\"container mt-4 mb-5\">\n        {children}\n      </main>\n\n      {/* Footer */}\n      <footer className=\"bg-light border-top mt-auto py-4\">\n        <div className=\"container\">\n          <div className=\"row\">\n            <div className=\"col-md-6\">\n              <h6 className=\"fw-bold\">Airbnb Clone</h6>\n              <p className=\"text-muted small mb-0\">\n                Your home away from home\n              </p>\n            </div>\n            <div className=\"col-md-6 text-md-end\">\n              <p className=\"text-muted small mb-0\">\n                © 2024 Airbnb Clone. Built with Rails & React.\n              </p>\n            </div>\n          </div>\n        </div>\n      </footer>\n    </React.Fragment>\n  );\n};\n\nLayout.propTypes = {\n  children: PropTypes.node.isRequired,\n};\n\nexport default Layout;"],"sourceRoot":""}