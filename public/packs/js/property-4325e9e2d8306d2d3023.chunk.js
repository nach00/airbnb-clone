(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{320:function(e,t,a){var n={"./af":75,"./af.js":75,"./ar":76,"./ar-dz":77,"./ar-dz.js":77,"./ar-kw":78,"./ar-kw.js":78,"./ar-ly":79,"./ar-ly.js":79,"./ar-ma":80,"./ar-ma.js":80,"./ar-ps":81,"./ar-ps.js":81,"./ar-sa":82,"./ar-sa.js":82,"./ar-tn":83,"./ar-tn.js":83,"./ar.js":76,"./az":84,"./az.js":84,"./be":85,"./be.js":85,"./bg":86,"./bg.js":86,"./bm":87,"./bm.js":87,"./bn":88,"./bn-bd":89,"./bn-bd.js":89,"./bn.js":88,"./bo":90,"./bo.js":90,"./br":91,"./br.js":91,"./bs":92,"./bs.js":92,"./ca":93,"./ca.js":93,"./cs":94,"./cs.js":94,"./cv":95,"./cv.js":95,"./cy":96,"./cy.js":96,"./da":97,"./da.js":97,"./de":98,"./de-at":99,"./de-at.js":99,"./de-ch":100,"./de-ch.js":100,"./de.js":98,"./dv":101,"./dv.js":101,"./el":102,"./el.js":102,"./en-au":103,"./en-au.js":103,"./en-ca":104,"./en-ca.js":104,"./en-gb":105,"./en-gb.js":105,"./en-ie":106,"./en-ie.js":106,"./en-il":107,"./en-il.js":107,"./en-in":108,"./en-in.js":108,"./en-nz":109,"./en-nz.js":109,"./en-sg":110,"./en-sg.js":110,"./eo":111,"./eo.js":111,"./es":112,"./es-do":113,"./es-do.js":113,"./es-mx":114,"./es-mx.js":114,"./es-us":115,"./es-us.js":115,"./es.js":112,"./et":116,"./et.js":116,"./eu":117,"./eu.js":117,"./fa":118,"./fa.js":118,"./fi":119,"./fi.js":119,"./fil":120,"./fil.js":120,"./fo":121,"./fo.js":121,"./fr":122,"./fr-ca":123,"./fr-ca.js":123,"./fr-ch":124,"./fr-ch.js":124,"./fr.js":122,"./fy":125,"./fy.js":125,"./ga":126,"./ga.js":126,"./gd":127,"./gd.js":127,"./gl":128,"./gl.js":128,"./gom-deva":129,"./gom-deva.js":129,"./gom-latn":130,"./gom-latn.js":130,"./gu":131,"./gu.js":131,"./he":132,"./he.js":132,"./hi":133,"./hi.js":133,"./hr":134,"./hr.js":134,"./hu":135,"./hu.js":135,"./hy-am":136,"./hy-am.js":136,"./id":137,"./id.js":137,"./is":138,"./is.js":138,"./it":139,"./it-ch":140,"./it-ch.js":140,"./it.js":139,"./ja":141,"./ja.js":141,"./jv":142,"./jv.js":142,"./ka":143,"./ka.js":143,"./kk":144,"./kk.js":144,"./km":145,"./km.js":145,"./kn":146,"./kn.js":146,"./ko":147,"./ko.js":147,"./ku":148,"./ku-kmr":149,"./ku-kmr.js":149,"./ku.js":148,"./ky":150,"./ky.js":150,"./lb":151,"./lb.js":151,"./lo":152,"./lo.js":152,"./lt":153,"./lt.js":153,"./lv":154,"./lv.js":154,"./me":155,"./me.js":155,"./mi":156,"./mi.js":156,"./mk":157,"./mk.js":157,"./ml":158,"./ml.js":158,"./mn":159,"./mn.js":159,"./mr":160,"./mr.js":160,"./ms":161,"./ms-my":162,"./ms-my.js":162,"./ms.js":161,"./mt":163,"./mt.js":163,"./my":164,"./my.js":164,"./nb":165,"./nb.js":165,"./ne":166,"./ne.js":166,"./nl":167,"./nl-be":168,"./nl-be.js":168,"./nl.js":167,"./nn":169,"./nn.js":169,"./oc-lnc":170,"./oc-lnc.js":170,"./pa-in":171,"./pa-in.js":171,"./pl":172,"./pl.js":172,"./pt":173,"./pt-br":174,"./pt-br.js":174,"./pt.js":173,"./ro":175,"./ro.js":175,"./ru":176,"./ru.js":176,"./sd":177,"./sd.js":177,"./se":178,"./se.js":178,"./si":179,"./si.js":179,"./sk":180,"./sk.js":180,"./sl":181,"./sl.js":181,"./sq":182,"./sq.js":182,"./sr":183,"./sr-cyrl":184,"./sr-cyrl.js":184,"./sr.js":183,"./ss":185,"./ss.js":185,"./sv":186,"./sv.js":186,"./sw":187,"./sw.js":187,"./ta":188,"./ta.js":188,"./te":189,"./te.js":189,"./tet":190,"./tet.js":190,"./tg":191,"./tg.js":191,"./th":192,"./th.js":192,"./tk":193,"./tk.js":193,"./tl-ph":194,"./tl-ph.js":194,"./tlh":195,"./tlh.js":195,"./tr":196,"./tr.js":196,"./tzl":197,"./tzl.js":197,"./tzm":198,"./tzm-latn":199,"./tzm-latn.js":199,"./tzm.js":198,"./ug-cn":200,"./ug-cn.js":200,"./uk":201,"./uk.js":201,"./ur":202,"./ur.js":202,"./uz":203,"./uz-latn":204,"./uz-latn.js":204,"./uz.js":203,"./vi":205,"./vi.js":205,"./x-pseudo":206,"./x-pseudo.js":206,"./yo":207,"./yo.js":207,"./zh-cn":208,"./zh-cn.js":208,"./zh-hk":209,"./zh-hk.js":209,"./zh-mo":210,"./zh-mo.js":210,"./zh-tw":211,"./zh-tw.js":211};function r(e){var t=s(e);return a(t)}function s(e){if(!a.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}r.keys=function(){return Object.keys(n)},r.resolve=s,e.exports=r,r.id=320},402:function(e,t,a){},404:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(10),c=a.n(s),o=a(8),l=a(272),i=a(1),m=a.n(i),u=a(5);a(401);function d(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function f(e,t){return f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},f(e,t)}function p(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=h(e);if(t){var r=h(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return b(this,a)}}function b(e,t){if(t&&("object"===typeof t||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function h(e){return h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},h(e)}var j=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&f(e,t)}(c,e);var t,a,n,s=p(c);function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(t=s.call(this,e)).checkAuthentication=function(){fetch("/api/authenticated").then(u.a).then((function(e){return e.json()})).then((function(e){t.setState({isAuthenticated:e.authenticated,checkingAuth:!1})})).catch((function(){t.setState({isAuthenticated:!1,checkingAuth:!1})}))},t.handleDatesChange=function(e){var a=e.startDate,n=e.endDate;t.setState({startDate:a,endDate:n,error:""})},t.handleFocusChange=function(e){t.setState({focusedInput:e})},t.handleGuestsChange=function(e){t.setState({guests:parseInt(e.target.value),error:""})},t.calculateNights=function(){var e=t.state,a=e.startDate,n=e.endDate;return a&&n?n.diff(a,"days"):0},t.calculateTotal=function(){return t.calculateNights()*t.props.property.price_per_night},t.handleBookingSubmit=function(e){e.preventDefault();var a=t.state,n=a.startDate,r=a.endDate,s=a.guests;if(a.isAuthenticated)if(!n||!r||s<1)t.setState({error:"Please select dates and number of guests"});else if(s>t.props.property.max_guests)t.setState({error:"Maximum ".concat(t.props.property.max_guests," guests allowed")});else{t.setState({loading:!0,error:""});var c={booking:{property_id:t.props.property.id,start_date:n.format("YYYY-MM-DD"),end_date:r.format("YYYY-MM-DD"),guests:s}};fetch("/api/bookings",Object(u.b)({method:"POST",body:JSON.stringify(c)})).then(u.a).then((function(e){return e.json()})).then((function(e){if(e.success)return t.createStripeCheckout(e.booking.id);throw new Error(e.errors?e.errors.join(", "):"Booking failed")})).catch((function(e){t.setState({error:e.message||"Network error. Please try again.",loading:!1})}))}else window.location.href="/login?redirect_url=".concat(encodeURIComponent(window.location.pathname))},t.createStripeCheckout=function(e){var a={booking_id:e};fetch("/api/charges",Object(u.b)({method:"POST",body:JSON.stringify(a)})).then(u.a).then((function(e){return e.json()})).then((function(e){e.success?"undefined"!==typeof window.Stripe?window.Stripe(void 0).redirectToCheckout({sessionId:e.checkout_session_id}).then((function(e){e.error&&t.setState({error:e.error.message,loading:!1})})):t.setState({error:"Payment system not available. Please try again.",loading:!1}):t.setState({error:e.error||"Payment setup failed",loading:!1})})).catch((function(){t.setState({error:"Payment setup failed. Please try again.",loading:!1})}))},t.state={startDate:null,endDate:null,focusedInput:null,guests:1,loading:!1,error:"",isAuthenticated:!1,checkingAuth:!0},t}return t=c,(a=[{key:"componentDidMount",value:function(){this.checkAuthentication()}},{key:"render",value:function(){var e=this.props.property,t=this.state,a=t.startDate,n=t.endDate,s=t.focusedInput,c=t.guests,o=t.loading,i=t.error,u=t.isAuthenticated,d=t.checkingAuth,f=this.calculateNights(),p=this.calculateTotal();return d?r.a.createElement("div",{className:"card booking-widget"},r.a.createElement("div",{className:"card-body"},r.a.createElement("div",{className:"text-center"},r.a.createElement("div",{className:"spinner-border spinner-border-sm",role:"status"},r.a.createElement("span",{className:"visually-hidden"},"Loading..."))))):r.a.createElement("div",{className:"card booking-widget"},r.a.createElement("div",{className:"card-body"},r.a.createElement("div",{className:"d-flex justify-content-between align-items-center mb-3"},r.a.createElement("div",null,r.a.createElement("span",{className:"h4 mb-0"},"$",e.price_per_night),r.a.createElement("span",{className:"text-muted"}," / night")),!u&&r.a.createElement("small",{className:"text-primary"},"Login to book")),r.a.createElement("form",{onSubmit:this.handleBookingSubmit},r.a.createElement("div",{className:"mb-3"},r.a.createElement("label",{className:"form-label fw-semibold"},"Dates"),r.a.createElement("div",{className:"date-picker-wrapper"},r.a.createElement(l.DateRangePicker,{startDate:a,startDateId:"start_date_input",endDate:n,endDateId:"end_date_input",onDatesChange:this.handleDatesChange,focusedInput:s,onFocusChange:this.handleFocusChange,numberOfMonths:1,isOutsideRange:function(e){return m()().isAfter(e)},displayFormat:"MMM DD, YYYY",hideKeyboardShortcutsPanel:!0,block:!0}))),r.a.createElement("div",{className:"mb-3"},r.a.createElement("label",{htmlFor:"guests",className:"form-label fw-semibold"},"Guests"),r.a.createElement("select",{id:"guests",className:"form-select",value:c,onChange:this.handleGuestsChange,disabled:o},Array.from({length:e.max_guests},(function(e,t){return t+1})).map((function(e){return r.a.createElement("option",{key:e,value:e},e," guest",e>1?"s":"")})))),i&&r.a.createElement("div",{className:"alert alert-danger py-2",role:"alert"},i),f>0&&r.a.createElement("div",{className:"booking-summary mb-3"},r.a.createElement("div",{className:"d-flex justify-content-between"},r.a.createElement("span",null,"$",e.price_per_night," \xd7 ",f," night",f>1?"s":""),r.a.createElement("span",null,"$",p)),r.a.createElement("hr",null),r.a.createElement("div",{className:"d-flex justify-content-between fw-semibold"},r.a.createElement("span",null,"Total"),r.a.createElement("span",null,"$",p))),r.a.createElement("button",{type:"submit",className:"btn btn-primary w-100",disabled:o||!a||!n},o?r.a.createElement(r.a.Fragment,null,r.a.createElement("span",{className:"spinner-border spinner-border-sm me-2",role:"status"}),"Booking..."):u?"Reserve":"Login to Reserve")),r.a.createElement("div",{className:"text-center mt-3"},r.a.createElement("small",{className:"text-muted"},"You won't be charged yet"))))}}])&&d(t.prototype,a),n&&d(t,n),Object.defineProperty(t,"prototype",{writable:!1}),c}(n.Component);function y(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function g(e,t){return g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},g(e,t)}function v(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=N(e);if(t){var r=N(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return E(this,a)}}function E(e,t){if(t&&("object"===typeof t||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function N(e){return N=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},N(e)}var k=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&g(e,t)}(c,e);var t,a,n,s=v(c);function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(t=s.call(this,e)).loadProperty=function(e){t.setState({loading:!0,error:null}),fetch("/api/properties/".concat(e),Object(u.b)({method:"GET"})).then(u.a).then((function(e){return e.json()})).then((function(e){t.setState({property:e.property,loading:!1})})).catch((function(e){console.error("Error loading property:",e),t.setState({loading:!1,error:"Failed to load property. Please try again."})}))},t.formatPrice=function(e){return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0}).format(e)},t.state={property:null,loading:!1,error:null},t}return t=c,(a=[{key:"componentDidMount",value:function(){var e=this.props.propertyId;e&&this.loadProperty(e)}},{key:"render",value:function(){var e=this.state,t=e.property,a=e.loading,n=e.error;return a?r.a.createElement(o.a,null,r.a.createElement("div",{className:"text-center py-5"},r.a.createElement("div",{className:"spinner-border text-primary",role:"status"},r.a.createElement("span",{className:"visually-hidden"},"Loading...")),r.a.createElement("p",{className:"mt-2 text-muted"},"Loading property details..."))):n?r.a.createElement(o.a,null,r.a.createElement("div",{className:"alert alert-danger",role:"alert"},n),r.a.createElement("div",{className:"text-center"},r.a.createElement("a",{href:"/",className:"btn btn-primary"},"Back to Home"))):t?r.a.createElement(o.a,null,r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12"},r.a.createElement("nav",{"aria-label":"breadcrumb"},r.a.createElement("ol",{className:"breadcrumb"},r.a.createElement("li",{className:"breadcrumb-item"},r.a.createElement("a",{href:"/"},"Home")),r.a.createElement("li",{className:"breadcrumb-item active","aria-current":"page"},t.title))))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-lg-8 mb-4"},r.a.createElement("div",{className:"card mb-4"},r.a.createElement("img",{src:t.image_url,className:"card-img-top",alt:t.title,style:{height:"400px",objectFit:"cover"}})),r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-body"},r.a.createElement("h1",{className:"card-title h2 mb-3"},t.title),r.a.createElement("div",{className:"row mb-3"},r.a.createElement("div",{className:"col-md-6"},r.a.createElement("p",{className:"text-muted mb-1"},r.a.createElement("i",{className:"fas fa-map-marker-alt me-2"}),t.city,", ",t.country),r.a.createElement("p",{className:"text-muted mb-0"},r.a.createElement("i",{className:"fas fa-home me-2"}),t.property_type)),r.a.createElement("div",{className:"col-md-6 text-md-end"},r.a.createElement("p",{className:"text-muted mb-1"},"Hosted by ",r.a.createElement("strong",null,t.user.username)))),r.a.createElement("hr",null),r.a.createElement("div",{className:"row mb-4"},r.a.createElement("div",{className:"col-3 text-center"},r.a.createElement("h5",{className:"mb-1"},t.max_guests),r.a.createElement("small",{className:"text-muted"},"Guests")),r.a.createElement("div",{className:"col-3 text-center"},r.a.createElement("h5",{className:"mb-1"},t.bedrooms),r.a.createElement("small",{className:"text-muted"},"Bedroom",1!==t.bedrooms?"s":"")),r.a.createElement("div",{className:"col-3 text-center"},r.a.createElement("h5",{className:"mb-1"},t.beds),r.a.createElement("small",{className:"text-muted"},"Bed",1!==t.beds?"s":"")),r.a.createElement("div",{className:"col-3 text-center"},r.a.createElement("h5",{className:"mb-1"},t.baths),r.a.createElement("small",{className:"text-muted"},"Bath",1!==t.baths?"s":""))),r.a.createElement("hr",null),r.a.createElement("h4",{className:"mb-3"},"About this place"),r.a.createElement("p",{className:"card-text"},t.description)))),r.a.createElement("div",{className:"col-lg-4"},r.a.createElement(j,{property:t})))):r.a.createElement(o.a,null,r.a.createElement("div",{className:"text-center py-5"},r.a.createElement("h4",{className:"text-muted"},"Property not found"),r.a.createElement("p",{className:"text-muted"},"The property you're looking for doesn't exist."),r.a.createElement("a",{href:"/",className:"btn btn-primary"},"Back to Home")))}}])&&y(t.prototype,a),n&&y(t,n),Object.defineProperty(t,"prototype",{writable:!1}),c}(r.a.Component);document.addEventListener("DOMContentLoaded",(function(){var e=document.getElementById("property-container"),t=e.getAttribute("data-property-id");c.a.render(r.a.createElement(k,{propertyId:t}),e)}));a(402)},5:function(e,t,a){"use strict";a.d(t,"a",(function(){return n})),a.d(t,"b",(function(){return r}));var n=function(e){if(!e.ok)throw Error(e.statusText);return e},r=function(e){var t=document.querySelector('meta[name="csrf-token"]').getAttribute("content");return Object.assign(e,{headers:Object.assign(e.headers||{},{"X-CSRF-Token":t,"Content-Type":"application/json"}),credentials:"same-origin"})}},8:function(e,t,a){"use strict";var n=a(0),r=a.n(n);t.a=function(e){var t=e.children;return r.a.createElement(r.a.Fragment,null,r.a.createElement("nav",{className:"navbar navbar-expand-lg navbar-light bg-light border-bottom"},r.a.createElement("div",{className:"container"},r.a.createElement("a",{className:"navbar-brand fw-bold text-primary",href:"/"},"Airbnb Clone"),r.a.createElement("button",{className:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarNav"},r.a.createElement("span",{className:"navbar-toggler-icon"})),r.a.createElement("div",{className:"collapse navbar-collapse",id:"navbarNav"},r.a.createElement("ul",{className:"navbar-nav ms-auto"},r.a.createElement("li",{className:"nav-item"},r.a.createElement("a",{className:"nav-link",href:"/"},"Home")),r.a.createElement("li",{className:"nav-item"},r.a.createElement("a",{className:"nav-link",href:"/login"},"Login")))))),r.a.createElement("main",{className:"container mt-4 mb-5"},t),r.a.createElement("footer",{className:"bg-light border-top mt-auto py-4"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-6"},r.a.createElement("h6",{className:"fw-bold"},"Airbnb Clone"),r.a.createElement("p",{className:"text-muted small mb-0"},"Your home away from home")),r.a.createElement("div",{className:"col-md-6 text-md-end"},r.a.createElement("p",{className:"text-muted small mb-0"},"\xa9 2024 Airbnb Clone. Built with Rails & React."))))))}}},[[404,10,0,12]]]);
//# sourceMappingURL=property-4325e9e2d8306d2d3023.chunk.js.map