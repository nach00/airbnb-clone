(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{282:function(e,t,a){},405:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(10),l=a.n(c),o=a(8),s=a(5);function i(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function m(e,t){return m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},m(e,t)}function u(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=p(e);if(t){var r=p(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return d(this,a)}}function d(e,t){if(t&&("object"===typeof t||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function p(e){return p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},p(e)}var f=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&m(e,t)}(l,e);var t,a,n,c=u(l);function l(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(t=c.call(this,e)).loadBooking=function(e){fetch("/api/bookings/".concat(e),Object(s.b)({method:"GET"})).then(s.a).then((function(e){return e.json()})).then((function(e){e.success?t.setState({booking:e.booking,loading:!1}):t.setState({error:"Booking not found",loading:!1})})).catch((function(e){console.error("Error loading booking:",e),t.setState({loading:!1,error:"Failed to load booking details."})}))},t.formatDate=function(e){return new Date(e).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})},t.calculateNights=function(e,t){var a=new Date(e),n=new Date(t);return Math.ceil((n-a)/864e5)},t.calculateTotal=function(e){return t.calculateNights(e.start_date,e.end_date)*e.property.price_per_night},t.state={booking:null,loading:!0,error:null},t}return t=l,(a=[{key:"componentDidMount",value:function(){var e=this.props.bookingId;e&&this.loadBooking(e)}},{key:"render",value:function(){var e=this.state,t=e.booking,a=e.loading,n=e.error;if(a)return r.a.createElement(o.a,null,r.a.createElement("div",{className:"text-center py-5"},r.a.createElement("div",{className:"spinner-border text-primary",role:"status"},r.a.createElement("span",{className:"visually-hidden"},"Loading...")),r.a.createElement("p",{className:"mt-2 text-muted"},"Loading booking details...")));if(n||!t)return r.a.createElement(o.a,null,r.a.createElement("div",{className:"row justify-content-center"},r.a.createElement("div",{className:"col-md-6"},r.a.createElement("div",{className:"alert alert-danger",role:"alert"},r.a.createElement("h4",{className:"alert-heading"},"Booking Not Found"),r.a.createElement("p",null,n||"The booking you're looking for doesn't exist."),r.a.createElement("hr",null),r.a.createElement("a",{href:"/",className:"btn btn-primary"},"Back to Home")))));var c=this.calculateNights(t.start_date,t.end_date),l=this.calculateTotal(t),s=t.charge&&t.charge.complete;return r.a.createElement(o.a,null,r.a.createElement("div",{className:"row justify-content-center"},r.a.createElement("div",{className:"col-md-8"},r.a.createElement("div",{className:"text-center mb-4"},r.a.createElement("div",{className:"display-1 text-success mb-3"},r.a.createElement("i",{className:"fas fa-check-circle"})),r.a.createElement("h1",{className:"h2 mb-3"},s?"Booking Confirmed!":"Booking Created!"),r.a.createElement("p",{className:"lead text-muted"},s?"Your payment has been processed and your booking is confirmed.":"Your booking has been created. Payment processing may take a few moments.")),r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-body"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-4 mb-3"},r.a.createElement("img",{src:t.property.image_url,className:"img-fluid rounded",alt:t.property.title,style:{width:"100%",height:"200px",objectFit:"cover"}})),r.a.createElement("div",{className:"col-md-8"},r.a.createElement("h4",{className:"card-title"},t.property.title),r.a.createElement("p",{className:"text-muted mb-3"},r.a.createElement("i",{className:"fas fa-map-marker-alt me-2"}),t.property.city,", ",t.property.country),r.a.createElement("div",{className:"row mb-3"},r.a.createElement("div",{className:"col-sm-6"},r.a.createElement("strong",null,"Check-in"),r.a.createElement("br",null),r.a.createElement("span",{className:"text-muted"},this.formatDate(t.start_date))),r.a.createElement("div",{className:"col-sm-6"},r.a.createElement("strong",null,"Check-out"),r.a.createElement("br",null),r.a.createElement("span",{className:"text-muted"},this.formatDate(t.end_date)))),r.a.createElement("div",{className:"row mb-3"},r.a.createElement("div",{className:"col-sm-6"},r.a.createElement("strong",null,"Guests"),r.a.createElement("br",null),r.a.createElement("span",{className:"text-muted"},t.guests," guest",t.guests>1?"s":"")),r.a.createElement("div",{className:"col-sm-6"},r.a.createElement("strong",null,"Duration"),r.a.createElement("br",null),r.a.createElement("span",{className:"text-muted"},c," night",c>1?"s":""))),r.a.createElement("hr",null),r.a.createElement("div",{className:"d-flex justify-content-between align-items-center"},r.a.createElement("div",null,r.a.createElement("strong",null,"Total Amount"),r.a.createElement("br",null),r.a.createElement("span",{className:"h4 text-primary"},"$",l)),r.a.createElement("div",{className:"text-end"},r.a.createElement("span",{className:"badge ".concat(s?"bg-success":"bg-warning"," fs-6")},s?"Payment Complete":"Payment Processing"))))))),r.a.createElement("div",{className:"text-center mt-4"},r.a.createElement("a",{href:"/",className:"btn btn-primary me-3"},"Browse More Properties"),r.a.createElement("a",{href:"/property/".concat(t.property_id),className:"btn btn-outline-primary"},"View Property")),!s&&r.a.createElement("div",{className:"alert alert-info mt-4",role:"alert"},r.a.createElement("h6",{className:"alert-heading"},"Payment Processing"),r.a.createElement("p",{className:"mb-0"},"Your payment is being processed. You'll receive a confirmation email once the payment is complete. If you have any questions, please contact our support team.")))))}}])&&i(t.prototype,a),n&&i(t,n),Object.defineProperty(t,"prototype",{writable:!1}),l}(r.a.Component);document.addEventListener("DOMContentLoaded",(function(){var e=document.getElementById("booking-success-container"),t=e.getAttribute("data-booking-id");l.a.render(r.a.createElement(f,{bookingId:t}),e)}));a(282)},5:function(e,t,a){"use strict";a.d(t,"a",(function(){return n})),a.d(t,"b",(function(){return r}));var n=function(e){if(!e.ok)throw Error(e.statusText);return e},r=function(e){var t=document.querySelector('meta[name="csrf-token"]').getAttribute("content");return Object.assign(e,{headers:Object.assign(e.headers||{},{"X-CSRF-Token":t,"Content-Type":"application/json"}),credentials:"same-origin"})}},8:function(e,t,a){"use strict";var n=a(0),r=a.n(n);t.a=function(e){var t=e.children;return r.a.createElement(r.a.Fragment,null,r.a.createElement("nav",{className:"navbar navbar-expand-lg navbar-light bg-light border-bottom"},r.a.createElement("div",{className:"container"},r.a.createElement("a",{className:"navbar-brand fw-bold text-primary",href:"/"},"Airbnb Clone"),r.a.createElement("button",{className:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarNav"},r.a.createElement("span",{className:"navbar-toggler-icon"})),r.a.createElement("div",{className:"collapse navbar-collapse",id:"navbarNav"},r.a.createElement("ul",{className:"navbar-nav ms-auto"},r.a.createElement("li",{className:"nav-item"},r.a.createElement("a",{className:"nav-link",href:"/"},"Home")),r.a.createElement("li",{className:"nav-item"},r.a.createElement("a",{className:"nav-link",href:"/login"},"Login")))))),r.a.createElement("main",{className:"container mt-4 mb-5"},t),r.a.createElement("footer",{className:"bg-light border-top mt-auto py-4"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-6"},r.a.createElement("h6",{className:"fw-bold"},"Airbnb Clone"),r.a.createElement("p",{className:"text-muted small mb-0"},"Your home away from home")),r.a.createElement("div",{className:"col-md-6 text-md-end"},r.a.createElement("p",{className:"text-muted small mb-0"},"\xa9 2024 Airbnb Clone. Built with Rails & React."))))))}}},[[405,7,0]]]);
//# sourceMappingURL=booking_success-716448f1e6ca2a7a45eb.chunk.js.map