{"version":3,"sources":["webpack:///./app/javascript/src/home.jsx","webpack:///./app/javascript/src/utils/fetchHelper.js","webpack:///./app/javascript/src/layout.jsx"],"names":["Home","props","loadProperties","page","setState","loading","error","fetch","safeCredentials","method","then","handleErrors","response","json","data","prevState","properties","totalPages","total_pages","nextPage","next_page","currentPage","current_page","console","loadMore","state","formatPrice","price","Intl","NumberFormat","style","currency","minimumFractionDigits","format","this","className","role","map","property","key","id","src","image_url","alt","title","height","objectFit","city","country","description","length","substring","price_per_night","max_guests","bedrooms","href","onClick","React","Component","document","addEventListener","ReactDOM","render","body","appendChild","createElement","ok","Error","statusText","object","token","querySelector","getAttribute","Object","assign","headers","credentials","Layout","children","Fragment","type"],"mappings":"ygEAKMA,E,0TACJ,WAAYC,GAAQ,IAAD,S,4FAAA,UACjB,cAAMA,IAeRC,eAAiB,WAAe,IAAdC,EAAa,uDAAN,EACvB,EAAKC,SAAS,CAAEC,SAAS,EAAMC,MAAO,OAEtCC,MAAM,wBAAD,OAAyBJ,GAAQK,YAAgB,CACpDC,OAAQ,SAEPC,KAAKC,KACLD,MAAK,SAAAE,GAAQ,OAAIA,EAASC,UAC1BH,MAAK,SAAAI,GACJ,EAAKV,UAAS,SAAAW,GAAS,MAAK,CAC1BC,WAAqB,IAATb,EAAaW,EAAKE,WAAlB,YAAmCD,EAAUC,YAA7C,EAA4DF,EAAKE,aAC7EC,WAAYH,EAAKI,YACjBC,SAAUL,EAAKM,UACfC,YAAaP,EAAKQ,aAClBjB,SAAS,SAXf,OAcS,SAAAC,GACLiB,QAAQjB,MAAM,4BAA6BA,GAC3C,EAAKF,SAAS,CACZC,SAAS,EACTC,MAAO,qDArCI,EA0CnBkB,SAAW,WACL,EAAKC,MAAMN,WAAa,EAAKM,MAAMpB,SACrC,EAAKH,eAAe,EAAKuB,MAAMN,WA5ChB,EAgDnBO,YAAc,SAACC,GACb,OAAO,IAAIC,KAAKC,aAAa,QAAS,CACpCC,MAAO,WACPC,SAAU,MACVC,sBAAuB,IACtBC,OAAON,IAnDV,EAAKF,MAAQ,CACXT,WAAY,GACZC,WAAY,EACZE,SAAU,KACVE,YAAa,EACbhB,SAAS,EACTC,MAAO,MARQ,E,8CAYnB,WACE4B,KAAKhC,mB,oBA2CP,WAAU,IAAD,OACP,EAAiDgC,KAAKT,MAA9CT,EAAR,EAAQA,WAAYX,EAApB,EAAoBA,QAASC,EAA7B,EAA6BA,MAAOa,EAApC,EAAoCA,SAEpC,OACE,kBAAC,IAAD,KACE,yBAAKgB,UAAU,OACb,yBAAKA,UAAU,UACb,wBAAIA,UAAU,QAAd,0BACA,uBAAGA,UAAU,mBAAb,sDAMH7B,GACC,yBAAK6B,UAAU,qBAAqBC,KAAK,SACtC9B,GAIL,yBAAK6B,UAAU,OACZnB,EAAWqB,KAAI,SAAAC,GAAQ,OACtB,yBAAKC,IAAKD,EAASE,GAAIL,UAAU,0BAC/B,yBAAKA,UAAU,wBACb,yBACEM,IAAKH,EAASI,UACdP,UAAU,eACVQ,IAAKL,EAASM,MACdd,MAAO,CAAEe,OAAQ,QAASC,UAAW,WAEvC,yBAAKX,UAAU,gCACb,wBAAIA,UAAU,cAAcG,EAASM,OACrC,uBAAGT,UAAU,8BACVG,EAASS,KADZ,KACoBT,EAASU,SAE7B,uBAAGb,UAAU,yBACVG,EAASW,YAAYC,OAAS,IAA9B,UACMZ,EAASW,YAAYE,UAAU,EAAG,KADxC,OAEGb,EAASW,aAGf,yBAAKd,UAAU,6DACb,6BACE,4BAAQA,UAAU,gBACf,EAAKT,YAAYY,EAASc,kBAE7B,2BAAOjB,UAAU,cAAjB,aAEF,yBAAKA,UAAU,YACb,2BAAOA,UAAU,sBACdG,EAASe,WADZ,WAGA,2BAAOlB,UAAU,cACdG,EAASgB,SADZ,OACgD,IAAtBhB,EAASgB,SAAiB,IAAM,MAI9D,uBACEC,KAAI,oBAAejB,EAASE,IAC5BL,UAAU,wBAFZ,uBAYa,IAAtBnB,EAAWkC,SAAiB7C,IAAYC,GACvC,yBAAK6B,UAAU,oBACb,wBAAIA,UAAU,cAAd,uBACA,uBAAGA,UAAU,cAAb,uCAIH9B,GACC,yBAAK8B,UAAU,oBACb,yBAAKA,UAAU,8BAA8BC,KAAK,UAChD,0BAAMD,UAAU,mBAAhB,eAEF,uBAAGA,UAAU,mBAAb,0BAIHhB,IAAad,GACZ,yBAAK8B,UAAU,oBACb,4BACEA,UAAU,iCACVqB,QAAStB,KAAKV,UAFhB,+B,iFAhJOiC,IAAMC,WA6JzBC,SAASC,iBAAiB,oBAAoB,WAC5CC,IAASC,OACP,kBAAC,EAAD,MACAH,SAASI,KAAKC,YAAYL,SAASM,cAAc,Y,uCCrKrD,wEAAMtD,EAAe,SAACC,GACpB,IAAKA,EAASsD,GACZ,MAAMC,MAAMvD,EAASwD,YAEvB,OAAOxD,GAGHJ,EAAkB,SAAC6D,GACvB,IAAMC,EAAQX,SAASY,cAAc,2BAA2BC,aAAa,WAC7E,OAAOC,OAAOC,OAAOL,EAAQ,CAC3BM,QAASF,OAAOC,OAAOL,EAAOM,SAAW,GAAI,CAC3C,eAAgBL,EAChB,eAAgB,qBAElBM,YAAa,kB,+BCdjB,oBAgEeC,IA7DA,SAAC,GAAkB,IAAhBC,EAAe,EAAfA,SAChB,OACE,kBAAC,IAAMC,SAAP,KAEE,yBAAK5C,UAAU,+DACb,yBAAKA,UAAU,aACb,uBAAGA,UAAU,oCAAoCoB,KAAK,KAAtD,gBAGA,4BACEpB,UAAU,iBACV6C,KAAK,SACL,iBAAe,WACf,iBAAe,cAEf,0BAAM7C,UAAU,yBAElB,yBAAKA,UAAU,2BAA2BK,GAAG,aAC3C,wBAAIL,UAAU,sBACZ,wBAAIA,UAAU,YACZ,uBAAGA,UAAU,WAAWoB,KAAK,KAA7B,SAEF,wBAAIpB,UAAU,YACZ,uBAAGA,UAAU,WAAWoB,KAAK,UAA7B,cAQV,0BAAMpB,UAAU,uBACb2C,GAIH,4BAAQ3C,UAAU,oCAChB,yBAAKA,UAAU,aACb,yBAAKA,UAAU,OACb,yBAAKA,UAAU,YACb,wBAAIA,UAAU,WAAd,gBACA,uBAAGA,UAAU,yBAAb,6BAIF,yBAAKA,UAAU,wBACb,uBAAGA,UAAU,yBAAb,6D","file":"js/home-7d5fc2efa649ec1a96d7.chunk.js","sourcesContent":["import React from 'react';\nimport ReactDOM from 'react-dom';\nimport Layout from './layout';\nimport { handleErrors, safeCredentials } from '@utils/fetchHelper';\n\nclass Home extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      properties: [],\n      totalPages: 0,\n      nextPage: null,\n      currentPage: 1,\n      loading: false,\n      error: null,\n    };\n  }\n\n  componentDidMount() {\n    this.loadProperties();\n  }\n\n  loadProperties = (page = 1) => {\n    this.setState({ loading: true, error: null });\n\n    fetch(`/api/properties?page=${page}`, safeCredentials({\n      method: 'GET',\n    }))\n      .then(handleErrors)\n      .then(response => response.json())\n      .then(data => {\n        this.setState(prevState => ({\n          properties: page === 1 ? data.properties : [...prevState.properties, ...data.properties],\n          totalPages: data.total_pages,\n          nextPage: data.next_page,\n          currentPage: data.current_page,\n          loading: false,\n        }));\n      })\n      .catch(error => {\n        console.error('Error loading properties:', error);\n        this.setState({ \n          loading: false, \n          error: 'Failed to load properties. Please try again.' \n        });\n      });\n  };\n\n  loadMore = () => {\n    if (this.state.nextPage && !this.state.loading) {\n      this.loadProperties(this.state.nextPage);\n    }\n  };\n\n  formatPrice = (price) => {\n    return new Intl.NumberFormat('en-US', {\n      style: 'currency',\n      currency: 'USD',\n      minimumFractionDigits: 0,\n    }).format(price);\n  };\n\n  render() {\n    const { properties, loading, error, nextPage } = this.state;\n\n    return (\n      <Layout>\n        <div className=\"row\">\n          <div className=\"col-12\">\n            <h1 className=\"mb-4\">Find Your Perfect Stay</h1>\n            <p className=\"text-muted mb-4\">\n              Discover amazing places to stay around the world\n            </p>\n          </div>\n        </div>\n\n        {error && (\n          <div className=\"alert alert-danger\" role=\"alert\">\n            {error}\n          </div>\n        )}\n\n        <div className=\"row\">\n          {properties.map(property => (\n            <div key={property.id} className=\"col-lg-4 col-md-6 mb-4\">\n              <div className=\"card h-100 shadow-sm\">\n                <img \n                  src={property.image_url} \n                  className=\"card-img-top\" \n                  alt={property.title}\n                  style={{ height: '200px', objectFit: 'cover' }}\n                />\n                <div className=\"card-body d-flex flex-column\">\n                  <h5 className=\"card-title\">{property.title}</h5>\n                  <p className=\"card-text text-muted small\">\n                    {property.city}, {property.country}\n                  </p>\n                  <p className=\"card-text flex-grow-1\">\n                    {property.description.length > 100 \n                      ? `${property.description.substring(0, 100)}...`\n                      : property.description\n                    }\n                  </p>\n                  <div className=\"d-flex justify-content-between align-items-center mt-auto\">\n                    <div>\n                      <strong className=\"text-primary\">\n                        {this.formatPrice(property.price_per_night)}\n                      </strong>\n                      <small className=\"text-muted\"> / night</small>\n                    </div>\n                    <div className=\"text-end\">\n                      <small className=\"text-muted d-block\">\n                        {property.max_guests} guests\n                      </small>\n                      <small className=\"text-muted\">\n                        {property.bedrooms} bed{property.bedrooms !== 1 ? 's' : ''}\n                      </small>\n                    </div>\n                  </div>\n                  <a \n                    href={`/property/${property.id}`} \n                    className=\"btn btn-primary mt-3\"\n                  >\n                    View Details\n                  </a>\n                </div>\n              </div>\n            </div>\n          ))}\n        </div>\n\n        {properties.length === 0 && !loading && !error && (\n          <div className=\"text-center py-5\">\n            <h4 className=\"text-muted\">No properties found</h4>\n            <p className=\"text-muted\">Check back later for new listings!</p>\n          </div>\n        )}\n\n        {loading && (\n          <div className=\"text-center py-4\">\n            <div className=\"spinner-border text-primary\" role=\"status\">\n              <span className=\"visually-hidden\">Loading...</span>\n            </div>\n            <p className=\"mt-2 text-muted\">Loading properties...</p>\n          </div>\n        )}\n\n        {nextPage && !loading && (\n          <div className=\"text-center mt-4\">\n            <button \n              className=\"btn btn-outline-primary btn-lg\"\n              onClick={this.loadMore}\n            >\n              Load More Properties\n            </button>\n          </div>\n        )}\n      </Layout>\n    );\n  }\n}\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  ReactDOM.render(\n    <Home />,\n    document.body.appendChild(document.createElement('div')),\n  );\n});\n","const handleErrors = (response) => {\n  if (!response.ok) {\n    throw Error(response.statusText);\n  }\n  return response;\n};\n\nconst safeCredentials = (object) => {\n  const token = document.querySelector('meta[name=\"csrf-token\"]').getAttribute('content');\n  return Object.assign(object, {\n    headers: Object.assign(object.headers || {}, {\n      'X-CSRF-Token': token,\n      'Content-Type': 'application/json',\n    }),\n    credentials: 'same-origin',\n  });\n};\n\nexport { handleErrors, safeCredentials };","import React from 'react';\nimport PropTypes from 'prop-types';\n\nconst Layout = ({ children }) => {\n  return (\n    <React.Fragment>\n      {/* Navigation Bar */}\n      <nav className=\"navbar navbar-expand-lg navbar-light bg-light border-bottom\">\n        <div className=\"container\">\n          <a className=\"navbar-brand fw-bold text-primary\" href=\"/\">\n            Airbnb Clone\n          </a>\n          <button \n            className=\"navbar-toggler\" \n            type=\"button\" \n            data-bs-toggle=\"collapse\" \n            data-bs-target=\"#navbarNav\"\n          >\n            <span className=\"navbar-toggler-icon\"></span>\n          </button>\n          <div className=\"collapse navbar-collapse\" id=\"navbarNav\">\n            <ul className=\"navbar-nav ms-auto\">\n              <li className=\"nav-item\">\n                <a className=\"nav-link\" href=\"/\">Home</a>\n              </li>\n              <li className=\"nav-item\">\n                <a className=\"nav-link\" href=\"/login\">Login</a>\n              </li>\n            </ul>\n          </div>\n        </div>\n      </nav>\n\n      {/* Main Content */}\n      <main className=\"container mt-4 mb-5\">\n        {children}\n      </main>\n\n      {/* Footer */}\n      <footer className=\"bg-light border-top mt-auto py-4\">\n        <div className=\"container\">\n          <div className=\"row\">\n            <div className=\"col-md-6\">\n              <h6 className=\"fw-bold\">Airbnb Clone</h6>\n              <p className=\"text-muted small mb-0\">\n                Your home away from home\n              </p>\n            </div>\n            <div className=\"col-md-6 text-md-end\">\n              <p className=\"text-muted small mb-0\">\n                © 2024 Airbnb Clone. Built with Rails & React.\n              </p>\n            </div>\n          </div>\n        </div>\n      </footer>\n    </React.Fragment>\n  );\n};\n\nLayout.propTypes = {\n  children: PropTypes.node.isRequired,\n};\n\nexport default Layout;"],"sourceRoot":""}